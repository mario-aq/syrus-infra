"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.WhatsAppConfig = void 0;
const constructs_1 = require("constructs");
const aws_cdk_lib_1 = require("aws-cdk-lib");
const ssm = require("aws-cdk-lib/aws-ssm");
/**
 * Creates SSM parameters for WhatsApp API configuration
 * These need to be populated with actual WhatsApp credentials
 */
class WhatsAppConfig extends constructs_1.Construct {
    constructor(scope, id, props) {
        super(scope, id);
        const { stageConfig } = props;
        // Create SSM parameters for WhatsApp credentials
        // These will need to be populated manually or through CI/CD
        this.verifyTokenParameter = new ssm.StringParameter(this, 'WhatsAppVerifyToken', {
            parameterName: `/syrus/${stageConfig.stage}/whatsapp/verify-token`,
            stringValue: 'PLACEHOLDER_VERIFY_TOKEN_UPDATE_MANUALLY',
            description: 'WhatsApp Business API Webhook Verify Token',
        });
        this.accessTokenParameter = new ssm.StringParameter(this, 'WhatsAppAccessToken', {
            parameterName: `/syrus/${stageConfig.stage}/whatsapp/access-token`,
            stringValue: 'PLACEHOLDER_ACCESS_TOKEN_UPDATE_MANUALLY',
            description: 'WhatsApp Business API Access Token (WA_TOKEN)',
        });
        this.phoneNumberIdParameter = new ssm.StringParameter(this, 'WhatsAppPhoneNumberId', {
            parameterName: `/syrus/${stageConfig.stage}/whatsapp/phone-number-id`,
            stringValue: 'PLACEHOLDER_PHONE_NUMBER_ID_UPDATE_MANUALLY',
            description: 'WhatsApp Business API Phone Number ID',
        });
        // Add tags
        aws_cdk_lib_1.Tags.of(this.verifyTokenParameter).add('App', 'Syrus');
        aws_cdk_lib_1.Tags.of(this.verifyTokenParameter).add('Service', 'WhatsAppBot');
        aws_cdk_lib_1.Tags.of(this.verifyTokenParameter).add('Stage', stageConfig.stage);
        aws_cdk_lib_1.Tags.of(this.accessTokenParameter).add('App', 'Syrus');
        aws_cdk_lib_1.Tags.of(this.accessTokenParameter).add('Service', 'WhatsAppBot');
        aws_cdk_lib_1.Tags.of(this.accessTokenParameter).add('Stage', stageConfig.stage);
        aws_cdk_lib_1.Tags.of(this.phoneNumberIdParameter).add('App', 'Syrus');
        aws_cdk_lib_1.Tags.of(this.phoneNumberIdParameter).add('Service', 'WhatsAppBot');
        aws_cdk_lib_1.Tags.of(this.phoneNumberIdParameter).add('Stage', stageConfig.stage);
    }
}
exports.WhatsAppConfig = WhatsAppConfig;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2hhdHNhcHAtY29uZmlnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2hhdHNhcHAtY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDJDQUF1QztBQUN2Qyw2Q0FBbUM7QUFDbkMsMkNBQTJDO0FBTzNDOzs7R0FHRztBQUNILE1BQWEsY0FBZSxTQUFRLHNCQUFTO0lBSzNDLFlBQVksS0FBZ0IsRUFBRSxFQUFVLEVBQUUsS0FBMEI7UUFDbEUsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVqQixNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsS0FBSyxDQUFDO1FBRTlCLGlEQUFpRDtRQUNqRCw0REFBNEQ7UUFDNUQsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksR0FBRyxDQUFDLGVBQWUsQ0FBQyxJQUFJLEVBQUUscUJBQXFCLEVBQUU7WUFDL0UsYUFBYSxFQUFFLFVBQVUsV0FBVyxDQUFDLEtBQUssd0JBQXdCO1lBQ2xFLFdBQVcsRUFBRSwwQ0FBMEM7WUFDdkQsV0FBVyxFQUFFLDRDQUE0QztTQUMxRCxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxHQUFHLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxxQkFBcUIsRUFBRTtZQUMvRSxhQUFhLEVBQUUsVUFBVSxXQUFXLENBQUMsS0FBSyx3QkFBd0I7WUFDbEUsV0FBVyxFQUFFLDBDQUEwQztZQUN2RCxXQUFXLEVBQUUsK0NBQStDO1NBQzdELENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLEdBQUcsQ0FBQyxlQUFlLENBQUMsSUFBSSxFQUFFLHVCQUF1QixFQUFFO1lBQ25GLGFBQWEsRUFBRSxVQUFVLFdBQVcsQ0FBQyxLQUFLLDJCQUEyQjtZQUNyRSxXQUFXLEVBQUUsNkNBQTZDO1lBQzFELFdBQVcsRUFBRSx1Q0FBdUM7U0FDckQsQ0FBQyxDQUFDO1FBRUgsV0FBVztRQUNYLGtCQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdkQsa0JBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxhQUFhLENBQUMsQ0FBQztRQUNqRSxrQkFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUVuRSxrQkFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZELGtCQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFDakUsa0JBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFbkUsa0JBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN6RCxrQkFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxDQUFDO1FBQ25FLGtCQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7Q0FDRjtBQTNDRCx3Q0EyQ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tICdjb25zdHJ1Y3RzJztcbmltcG9ydCB7IFRhZ3MgfSBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgKiBhcyBzc20gZnJvbSAnYXdzLWNkay1saWIvYXdzLXNzbSc7XG5pbXBvcnQgeyBTdGFnZUNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcblxuZXhwb3J0IGludGVyZmFjZSBXaGF0c0FwcENvbmZpZ1Byb3BzIHtcbiAgc3RhZ2VDb25maWc6IFN0YWdlQ29uZmlnO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgU1NNIHBhcmFtZXRlcnMgZm9yIFdoYXRzQXBwIEFQSSBjb25maWd1cmF0aW9uXG4gKiBUaGVzZSBuZWVkIHRvIGJlIHBvcHVsYXRlZCB3aXRoIGFjdHVhbCBXaGF0c0FwcCBjcmVkZW50aWFsc1xuICovXG5leHBvcnQgY2xhc3MgV2hhdHNBcHBDb25maWcgZXh0ZW5kcyBDb25zdHJ1Y3Qge1xuICBwdWJsaWMgcmVhZG9ubHkgdmVyaWZ5VG9rZW5QYXJhbWV0ZXI6IHNzbS5TdHJpbmdQYXJhbWV0ZXI7XG4gIHB1YmxpYyByZWFkb25seSBhY2Nlc3NUb2tlblBhcmFtZXRlcjogc3NtLlN0cmluZ1BhcmFtZXRlcjtcbiAgcHVibGljIHJlYWRvbmx5IHBob25lTnVtYmVySWRQYXJhbWV0ZXI6IHNzbS5TdHJpbmdQYXJhbWV0ZXI7XG5cbiAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IFdoYXRzQXBwQ29uZmlnUHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQpO1xuXG4gICAgY29uc3QgeyBzdGFnZUNvbmZpZyB9ID0gcHJvcHM7XG5cbiAgICAvLyBDcmVhdGUgU1NNIHBhcmFtZXRlcnMgZm9yIFdoYXRzQXBwIGNyZWRlbnRpYWxzXG4gICAgLy8gVGhlc2Ugd2lsbCBuZWVkIHRvIGJlIHBvcHVsYXRlZCBtYW51YWxseSBvciB0aHJvdWdoIENJL0NEXG4gICAgdGhpcy52ZXJpZnlUb2tlblBhcmFtZXRlciA9IG5ldyBzc20uU3RyaW5nUGFyYW1ldGVyKHRoaXMsICdXaGF0c0FwcFZlcmlmeVRva2VuJywge1xuICAgICAgcGFyYW1ldGVyTmFtZTogYC9zeXJ1cy8ke3N0YWdlQ29uZmlnLnN0YWdlfS93aGF0c2FwcC92ZXJpZnktdG9rZW5gLFxuICAgICAgc3RyaW5nVmFsdWU6ICdQTEFDRUhPTERFUl9WRVJJRllfVE9LRU5fVVBEQVRFX01BTlVBTExZJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnV2hhdHNBcHAgQnVzaW5lc3MgQVBJIFdlYmhvb2sgVmVyaWZ5IFRva2VuJyxcbiAgICB9KTtcblxuICAgIHRoaXMuYWNjZXNzVG9rZW5QYXJhbWV0ZXIgPSBuZXcgc3NtLlN0cmluZ1BhcmFtZXRlcih0aGlzLCAnV2hhdHNBcHBBY2Nlc3NUb2tlbicsIHtcbiAgICAgIHBhcmFtZXRlck5hbWU6IGAvc3lydXMvJHtzdGFnZUNvbmZpZy5zdGFnZX0vd2hhdHNhcHAvYWNjZXNzLXRva2VuYCxcbiAgICAgIHN0cmluZ1ZhbHVlOiAnUExBQ0VIT0xERVJfQUNDRVNTX1RPS0VOX1VQREFURV9NQU5VQUxMWScsXG4gICAgICBkZXNjcmlwdGlvbjogJ1doYXRzQXBwIEJ1c2luZXNzIEFQSSBBY2Nlc3MgVG9rZW4gKFdBX1RPS0VOKScsXG4gICAgfSk7XG5cbiAgICB0aGlzLnBob25lTnVtYmVySWRQYXJhbWV0ZXIgPSBuZXcgc3NtLlN0cmluZ1BhcmFtZXRlcih0aGlzLCAnV2hhdHNBcHBQaG9uZU51bWJlcklkJywge1xuICAgICAgcGFyYW1ldGVyTmFtZTogYC9zeXJ1cy8ke3N0YWdlQ29uZmlnLnN0YWdlfS93aGF0c2FwcC9waG9uZS1udW1iZXItaWRgLFxuICAgICAgc3RyaW5nVmFsdWU6ICdQTEFDRUhPTERFUl9QSE9ORV9OVU1CRVJfSURfVVBEQVRFX01BTlVBTExZJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnV2hhdHNBcHAgQnVzaW5lc3MgQVBJIFBob25lIE51bWJlciBJRCcsXG4gICAgfSk7XG5cbiAgICAvLyBBZGQgdGFnc1xuICAgIFRhZ3Mub2YodGhpcy52ZXJpZnlUb2tlblBhcmFtZXRlcikuYWRkKCdBcHAnLCAnU3lydXMnKTtcbiAgICBUYWdzLm9mKHRoaXMudmVyaWZ5VG9rZW5QYXJhbWV0ZXIpLmFkZCgnU2VydmljZScsICdXaGF0c0FwcEJvdCcpO1xuICAgIFRhZ3Mub2YodGhpcy52ZXJpZnlUb2tlblBhcmFtZXRlcikuYWRkKCdTdGFnZScsIHN0YWdlQ29uZmlnLnN0YWdlKTtcblxuICAgIFRhZ3Mub2YodGhpcy5hY2Nlc3NUb2tlblBhcmFtZXRlcikuYWRkKCdBcHAnLCAnU3lydXMnKTtcbiAgICBUYWdzLm9mKHRoaXMuYWNjZXNzVG9rZW5QYXJhbWV0ZXIpLmFkZCgnU2VydmljZScsICdXaGF0c0FwcEJvdCcpO1xuICAgIFRhZ3Mub2YodGhpcy5hY2Nlc3NUb2tlblBhcmFtZXRlcikuYWRkKCdTdGFnZScsIHN0YWdlQ29uZmlnLnN0YWdlKTtcblxuICAgIFRhZ3Mub2YodGhpcy5waG9uZU51bWJlcklkUGFyYW1ldGVyKS5hZGQoJ0FwcCcsICdTeXJ1cycpO1xuICAgIFRhZ3Mub2YodGhpcy5waG9uZU51bWJlcklkUGFyYW1ldGVyKS5hZGQoJ1NlcnZpY2UnLCAnV2hhdHNBcHBCb3QnKTtcbiAgICBUYWdzLm9mKHRoaXMucGhvbmVOdW1iZXJJZFBhcmFtZXRlcikuYWRkKCdTdGFnZScsIHN0YWdlQ29uZmlnLnN0YWdlKTtcbiAgfVxufVxuIl19